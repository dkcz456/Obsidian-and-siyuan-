# Svelte Flow å®Œæ•´å¼€å‘æ–‡æ¡£

## ğŸš€ ç®€ä»‹

Svelte Flow æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºåŸºäºèŠ‚ç‚¹çš„ç¼–è¾‘å™¨å’Œäº¤äº’å¼å›¾è¡¨çš„å¯å®šåˆ¶ Svelte ç»„ä»¶ã€‚å®ƒæ˜¯ç”± xyflow å›¢é˜Ÿï¼ˆReact Flow çš„åˆ›å»ºè€…ï¼‰ä¸“é—¨ä¸º Svelte ä»å¤´æ„å»ºçš„ MIT è®¸å¯å¼€æºåº“ã€‚

### æ ¸å¿ƒç‰¹æ€§
- **ğŸ•¹ å¼€ç®±å³ç”¨çš„äº¤äº’æ€§**ï¼šæ‹–æ‹½èŠ‚ç‚¹ã€ç¼©æ”¾ã€å¹³ç§»ã€é€‰æ‹©å¤šä¸ªèŠ‚ç‚¹å’Œæ·»åŠ /åˆ é™¤è¾¹éƒ½æ˜¯å†…ç½®åŠŸèƒ½
- **ğŸ’… æ˜“äºå®šåˆ¶**ï¼šSvelte Flow èŠ‚ç‚¹æ˜¯å¯å®šåˆ¶çš„ç»„ä»¶ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œè°ƒæ•´å’Œä¿®æ”¹
- **ğŸ”Œ å†…ç½®ç»„ä»¶**ï¼šBackgroundã€Minimapã€Controls å’Œ Panel ç»„ä»¶å®‰è£…å³å¯ä½¿ç”¨

## ğŸ“¦ å®‰è£…å’Œè®¾ç½®

### å‰ææ¡ä»¶
Svelte Flow æ˜¯ä¸€ä¸ª Svelte åº“ï¼Œéœ€è¦ä½ ç†Ÿæ‚‰ Svelte çš„åŸºæœ¬æ¦‚å¿µï¼Œå¦‚å“åº”å¼çŠ¶æ€ã€propsã€ç»„ä»¶å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

### å®‰è£…
```bash
# ä½¿ç”¨ npm
npm install @xyflow/svelte

# ä½¿ç”¨ pnpm  
pnpm install @xyflow/svelte

# ä½¿ç”¨ yarn
yarn add @xyflow/svelte
```

### åŸºæœ¬è®¾ç½®
é¦–å…ˆï¼Œå°† Svelte Flow ç»„ä»¶åŠå…¶å¿…éœ€çš„æ ·å¼å¯¼å…¥åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼š

```javascript
import { SvelteFlow, Background } from '@xyflow/svelte';
import '@xyflow/svelte/dist/style.css';
```

## ğŸ å¿«é€Ÿå¼€å§‹

### åˆ›å»ºç¬¬ä¸€ä¸ªæµç¨‹å›¾

#### 1. åŸºç¡€ç»„ä»¶è®¾ç½®
```svelte
<script>
  import { SvelteFlow, Background } from '@xyflow/svelte';
  import '@xyflow/svelte/dist/style.css';
</script>

<div style:width="100vw" style:height="100vh">
  <SvelteFlow>
    <Background />
  </SvelteFlow>
</div>
```

#### 2. æ·»åŠ èŠ‚ç‚¹å’Œè¾¹
```svelte
<script>
  import { SvelteFlow, Background } from '@xyflow/svelte';
  import '@xyflow/svelte/dist/style.css';

  let nodes = $state.raw([
    { 
      id: '1', 
      type: 'input',
      position: { x: 0, y: 0 }, 
      data: { label: 'Hello' } 
    },
    { 
      id: '2', 
      type: 'output',
      position: { x: 100, y: 100 }, 
      data: { label: 'World' } 
    },
  ]);

  let edges = $state.raw([
    { 
      id: 'e1-2', 
      source: '1', 
      target: '2',
      type: 'smoothstep',
      label: 'Hello World'
    }
  ]);
</script>

<div style:width="100vw" style:height="100vh">
  <SvelteFlow {nodes} {edges} fitView>
    <Background />
  </SvelteFlow>
</div>
```

## ğŸ¨ æ ¸å¿ƒæ¦‚å¿µ

### èŠ‚ç‚¹ (Nodes)
èŠ‚ç‚¹æ˜¯æµç¨‹å›¾ä¸­çš„åŸºæœ¬å…ƒç´ ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ï¼š
- `id`: å”¯ä¸€æ ‡è¯†ç¬¦
- `type`: èŠ‚ç‚¹ç±»å‹ï¼ˆinputã€outputã€default æˆ–è‡ªå®šä¹‰ç±»å‹ï¼‰
- `position`: èŠ‚ç‚¹åœ¨ç”»å¸ƒä¸Šçš„ä½ç½® {x, y}
- `data`: èŠ‚ç‚¹æ•°æ®ï¼Œé€šå¸¸åŒ…å« label ç­‰ä¿¡æ¯

### è¾¹ (Edges) 
è¾¹è¿æ¥ä¸¤ä¸ªèŠ‚ç‚¹ï¼ŒåŒ…å«ï¼š
- `id`: å”¯ä¸€æ ‡è¯†ç¬¦
- `source`: æºèŠ‚ç‚¹ ID
- `target`: ç›®æ ‡èŠ‚ç‚¹ ID  
- `type`: è¾¹çš„ç±»å‹ï¼ˆdefaultã€smoothstepã€step ç­‰ï¼‰
- `label`: å¯é€‰çš„è¾¹æ ‡ç­¾

### å¥æŸ„ (Handles)
å¥æŸ„æ˜¯èŠ‚ç‚¹ä¸Šçš„è¿æ¥ç‚¹ï¼Œç”¨äºåˆ›å»ºè¾¹ï¼š
- `source`: æºå¥æŸ„ï¼Œè¾¹ä»è¿™é‡Œå¼€å§‹
- `target`: ç›®æ ‡å¥æŸ„ï¼Œè¾¹åœ¨è¿™é‡Œç»“æŸ

## ğŸ›  å†…ç½®ç»„ä»¶

### Background èƒŒæ™¯
```svelte
<SvelteFlow>
  <Background variant="dots" />
</SvelteFlow>
```

### Controls æ§åˆ¶å™¨
```svelte
<SvelteFlow>
  <Controls />
</SvelteFlow>
```

### MiniMap å°åœ°å›¾
```svelte
<SvelteFlow>
  <MiniMap />
</SvelteFlow>
```

### Panel é¢æ¿
```svelte
<SvelteFlow>
  <Panel position="top-left">
    <button>è‡ªå®šä¹‰æŒ‰é’®</button>
  </Panel>
</SvelteFlow>
```

## ğŸ¯ è‡ªå®šä¹‰èŠ‚ç‚¹

åˆ›å»ºè‡ªå®šä¹‰èŠ‚ç‚¹æ˜¯ Svelte Flow çš„å¼ºå¤§åŠŸèƒ½ï¼š

```svelte
<!-- CustomNode.svelte -->
<script>
  import { Handle } from '@xyflow/svelte';
  
  export let data;
</script>

<div class="custom-node">
  <Handle type="target" position="top" />
  
  <div class="node-content">
    <h3>{data.title}</h3>
    <p>{data.description}</p>
  </div>
  
  <Handle type="source" position="bottom" />
</div>

<style>
  .custom-node {
    padding: 10px;
    border: 2px solid #1a192b;
    border-radius: 10px;
    background: white;
  }
</style>
```

æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹ï¼š
```svelte
<script>
  import CustomNode from './CustomNode.svelte';
  
  const nodeTypes = {
    custom: CustomNode
  };
  
  let nodes = $state.raw([
    {
      id: '1',
      type: 'custom',
      position: { x: 100, y: 100 },
      data: { 
        title: 'è‡ªå®šä¹‰èŠ‚ç‚¹',
        description: 'è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰èŠ‚ç‚¹ç¤ºä¾‹'
      }
    }
  ]);
</script>

<SvelteFlow {nodes} {nodeTypes}>
  <Background />
</SvelteFlow>
```

## ğŸ”„ äº‹ä»¶å¤„ç†

### èŠ‚ç‚¹äº‹ä»¶
```svelte
<script>
  const onNodeClick = (event, node) => {
    console.log('èŠ‚ç‚¹è¢«ç‚¹å‡»:', node);
  };
  
  const onNodeDrag = (event, node) => {
    console.log('èŠ‚ç‚¹è¢«æ‹–æ‹½:', node);
  };
</script>

<SvelteFlow 
  {nodes} 
  {edges}
  on:nodeclick={onNodeClick}
  on:nodedrag={onNodeDrag}
>
  <Background />
</SvelteFlow>
```

### è¾¹äº‹ä»¶
```svelte
<script>
  const onConnect = (connection) => {
    console.log('æ–°è¿æ¥:', connection);
    edges = [...edges, {
      ...connection,
      id: `${connection.source}-${connection.target}`
    }];
  };
</script>

<SvelteFlow 
  {nodes} 
  {edges}
  on:connect={onConnect}
>
  <Background />
</SvelteFlow>
```

## ğŸ¨ æ ·å¼å®šåˆ¶

### ä½¿ç”¨ CSS å˜é‡
```css
:global(.svelte-flow) {
  --xy-edge-stroke: #b1b1b7;
  --xy-edge-stroke-selected: #555;
  --xy-handle: #1a192b;
  --xy-handle-border: #fff;
  --xy-node-border: #1a192b;
  --xy-node-background: #fff;
}
```

### Tailwind CSS æ”¯æŒ
Svelte Flow ä¸ Tailwind CSS å®Œç¾é…åˆï¼š

```svelte
<div class="w-full h-screen bg-gray-100">
  <SvelteFlow {nodes} {edges} class="border rounded-lg">
    <Background class="bg-gray-50" />
  </SvelteFlow>
</div>
```

## ğŸ“± é«˜çº§åŠŸèƒ½

### è‡ªåŠ¨å¸ƒå±€
```svelte
<script>
  import { fitView } from '@xyflow/svelte';
  
  // è‡ªåŠ¨é€‚é…è§†å›¾
  const handleFitView = () => {
    fitView();
  };
</script>

<SvelteFlow {nodes} {edges} fitView>
  <Controls />
  <Panel position="top-right">
    <button on:click={handleFitView}>é€‚é…è§†å›¾</button>
  </Panel>
</SvelteFlow>
```

### è¾¹é‡è¿
ä½ å¯ä»¥ä½¿ç”¨æ–°çš„ EdgeReconnectAnchor ç»„ä»¶æ¥é‡æ–°è¿æ¥è¾¹ï¼š

```svelte
<script>
  import { EdgeReconnectAnchor } from '@xyflow/svelte';
</script>

<SvelteFlow {nodes} {edges}>
  <EdgeReconnectAnchor />
  <Background />
</SvelteFlow>
```

### é”®ç›˜å¯¼èˆª
æ·»åŠ äº†é”®ç›˜å¯¼èˆªå’Œæ”¹è¿›çš„æ— éšœç¢åŠŸèƒ½æ”¯æŒï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨ç®­å¤´é”®åœ¨èŠ‚ç‚¹å’Œè¾¹ä¹‹é—´å¯¼èˆªã€‚

## ğŸ”§ API å‚è€ƒ

### SvelteFlow Props
- `nodes`: èŠ‚ç‚¹æ•°ç»„
- `edges`: è¾¹æ•°ç»„  
- `nodeTypes`: è‡ªå®šä¹‰èŠ‚ç‚¹ç±»å‹æ˜ å°„
- `edgeTypes`: è‡ªå®šä¹‰è¾¹ç±»å‹æ˜ å°„
- `fitView`: æ˜¯å¦è‡ªåŠ¨é€‚é…è§†å›¾
- `minZoom`: æœ€å°ç¼©æ”¾çº§åˆ«
- `maxZoom`: æœ€å¤§ç¼©æ”¾çº§åˆ«

### å¸¸ç”¨äº‹ä»¶
- `on:nodeclick`: èŠ‚ç‚¹ç‚¹å‡»
- `on:nodedrag`: èŠ‚ç‚¹æ‹–æ‹½
- `on:edgeclick`: è¾¹ç‚¹å‡»
- `on:connect`: åˆ›å»ºè¿æ¥
- `on:paneclick`: ç”»å¸ƒç‚¹å‡»

## ğŸ“š ç¤ºä¾‹é¡¹ç›®

### å·¥ä½œæµç¼–è¾‘å™¨
```svelte
<script>
  import { SvelteFlow, Background, Controls, MiniMap } from '@xyflow/svelte';
  import '@xyflow/svelte/dist/style.css';
  
  let nodes = $state.raw([
    { id: 'start', type: 'input', position: { x: 0, y: 0 }, data: { label: 'å¼€å§‹' } },
    { id: 'process', position: { x: 200, y: 0 }, data: { label: 'å¤„ç†' } },
    { id: 'end', type: 'output', position: { x: 400, y: 0 }, data: { label: 'ç»“æŸ' } }
  ]);
  
  let edges = $state.raw([
    { id: 'e1', source: 'start', target: 'process' },
    { id: 'e2', source: 'process', target: 'end' }
  ]);
</script>

<div class="w-full h-screen">
  <SvelteFlow {nodes} {edges} fitView>
    <Background variant="dots" />
    <Controls />
    <MiniMap />
  </SvelteFlow>
</div>
```

## ğŸŒŸ æœ€ä½³å®è·µ

1. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¯¹äºå¤§å‹å›¾è¡¨ï¼Œä½¿ç”¨ `$state.raw()` æ¥é¿å…æ·±åº¦å“åº”æ€§
2. **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ TypeScript æ¥è·å¾—æ›´å¥½çš„å¼€å‘ä½“éªŒ
3. **ç»„ä»¶å¤ç”¨**ï¼šåˆ›å»ºå¯å¤ç”¨çš„è‡ªå®šä¹‰èŠ‚ç‚¹ç»„ä»¶
4. **çŠ¶æ€ç®¡ç†**ï¼šå¯¹äºå¤æ‚åº”ç”¨ï¼Œè€ƒè™‘ä½¿ç”¨ Svelte stores

## ğŸ”— èµ„æºé“¾æ¥

- **å®˜æ–¹ç½‘ç«™**: https://svelteflow.dev
- **GitHub ä»“åº“**: https://github.com/xyflow/xyflow
- **ç¤ºä¾‹é›†åˆ**: https://svelteflow.dev/examples
- **Discord ç¤¾åŒº**: [åŠ å…¥ Discord](https://discord.gg/invite-link)
- **API æ–‡æ¡£**: https://svelteflow.dev/api-reference
https://svelteflow.dev/learn
https://svelteflow.dev/api-reference
https://svelteflow.dev/examples



## ğŸ’¡ ç¤¾åŒºé¡¹ç›®

å·²ç»æœ‰å¼€å‘è€…ä½¿ç”¨ Svelte Flow æ„å»ºäº†å„ç§é¡¹ç›®ï¼ŒåŒ…æ‹¬å¸®åŠ©äººä»¬åœ¨æµè§ˆå™¨ä¸­æ¢ç´¢ ffmpeg è¿‡æ»¤å™¨çš„å·¥å…·ã€å¼€å‘è€…å¹³å°å’Œå·¥ä½œæµå¼•æ“ã€API æµ‹è¯•å·¥ä½œåŒºç­‰ã€‚

---

è¿™ä»½æ–‡æ¡£æ¶µç›–äº† Svelte Flw çš„æ‰€æœ‰åŸºç¡€å’Œé«˜çº§åŠŸèƒ½ã€‚å¦‚æœä½ éœ€è¦æ›´è¯¦ç»†çš„æŸä¸ªç‰¹å®šåŠŸèƒ½çš„è¯´æ˜ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼